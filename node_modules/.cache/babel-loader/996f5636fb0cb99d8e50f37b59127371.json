{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sagardalal/Desktop/Desktop/ReactJS/social-app-github/src/containers/post/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport { Comment } from \"../../components\";\nimport { db, storage } from \"../../firebase\";\nimport \"./style.css\";\nimport { CommentInput } from \"../../components\";\nimport { UserContext } from \"../../contexts/user\";\nimport { DarkModeContext } from \"../../contexts/darkmode\";\nexport default function Post({\n  profileUrl,\n  username,\n  id,\n  photoUrl,\n  caption,\n  comments\n}) {\n  _s();\n\n  const [user, setUser] = useContext(UserContext).user;\n  const [DarkMode, setDarkMode] = useContext(DarkModeContext).DarkMode;\n  var postCss = \"post\";\n  var post__delete = \"post__delete\";\n\n  if (DarkMode) {\n    postCss = \"post dark\";\n    post__delete = \"post__delete dark\";\n  }\n\n  var displayDelete = false;\n  var currentUser = null;\n\n  const postUserChecker = () => {\n    if (user) {\n      currentUser = user.email.replace(\"@gmail.com\", \"\");\n    }\n\n    if (currentUser === username && currentUser !== null) {\n      displayDelete = true;\n    }\n  };\n\n  postUserChecker();\n\n  const deletePost = () => {\n    //delete the image from firebase storage\n    //get reference to the image file we like to delete\n    var imageRef = storage.refFromURL(photoUrl); //delete the file\n\n    imageRef.delete().then(function () {\n      console.log(\"delete successfull\");\n    }).catch(function (error) {\n      console.log(`Error delete${error}`);\n    }); //2 delete the post info from firbase firestore\n\n    db.collection(\"posts\").doc(id).delete().then(function () {\n      console.log(\"delete successfull from firebase\");\n    }).catch(function (error) {\n      console.log(`Error post info delete from firebase ${error}`);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: postCss,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post__header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post__headerLeft\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"post__profilePic\",\n          src: profileUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginLeft: \"8px\"\n          },\n          children: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), displayDelete ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deletePost,\n        className: post__delete,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post__center\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"post__photoUrl\",\n        src: photoUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: \"600\",\n            marginRight: \"4px\"\n          },\n          children: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), caption]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), comments ? comments.map(comment => /*#__PURE__*/_jsxDEV(Comment, {\n      username: comment.username,\n      caption: comment.comment\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this), user ? /*#__PURE__*/_jsxDEV(CommentInput, {\n      comments: comments,\n      id: id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 62\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Post, \"bm0ZwwmmMt3H7bFMoQVNW1+jl04=\");\n\n_c = Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["/Users/sagardalal/Desktop/Desktop/ReactJS/social-app-github/src/containers/post/index.js"],"names":["React","useContext","useState","Comment","db","storage","CommentInput","UserContext","DarkModeContext","Post","profileUrl","username","id","photoUrl","caption","comments","user","setUser","DarkMode","setDarkMode","postCss","post__delete","displayDelete","currentUser","postUserChecker","email","replace","deletePost","imageRef","refFromURL","delete","then","console","log","catch","error","collection","doc","marginLeft","fontWeight","marginRight","map","comment"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { Comment } from \"../../components\";\nimport { db, storage } from \"../../firebase\";\nimport \"./style.css\";\nimport { CommentInput } from \"../../components\";\nimport { UserContext } from \"../../contexts/user\";\nimport { DarkModeContext } from \"../../contexts/darkmode\";\n\nexport default function Post({\n  profileUrl,\n  username,\n  id,\n  photoUrl,\n  caption,\n  comments,\n}) {\n  const [user, setUser] = useContext(UserContext).user;\n\n  const [DarkMode, setDarkMode] = useContext(DarkModeContext).DarkMode;\n  var postCss = \"post\";\n  var post__delete = \"post__delete\";\n  if (DarkMode) {\n    postCss = \"post dark\";\n    post__delete = \"post__delete dark\";\n  }\n\n  var displayDelete = false;\n  var currentUser = null;\n  const postUserChecker = () => {\n    if (user) {\n      currentUser = user.email.replace(\"@gmail.com\", \"\");\n    }\n    if (currentUser === username && currentUser !== null) {\n      displayDelete = true;\n    }\n  };\n  postUserChecker();\n\n  const deletePost = () => {\n    //delete the image from firebase storage\n\n    //get reference to the image file we like to delete\n    var imageRef = storage.refFromURL(photoUrl);\n\n    //delete the file\n    imageRef\n      .delete()\n      .then(function () {\n        console.log(\"delete successfull\");\n      })\n      .catch(function (error) {\n        console.log(`Error delete${error}`);\n      });\n\n    //2 delete the post info from firbase firestore\n    db.collection(\"posts\")\n      .doc(id)\n      .delete()\n      .then(function () {\n        console.log(\"delete successfull from firebase\");\n      })\n      .catch(function (error) {\n        console.log(`Error post info delete from firebase ${error}`);\n      });\n  };\n\n  return (\n    <div className={postCss}>\n      <div className=\"post__header\">\n        <div className=\"post__headerLeft\">\n          <img className=\"post__profilePic\" src={profileUrl} />\n          <p style={{ marginLeft: \"8px\" }}>{username}</p>\n        </div>\n        {displayDelete ? (\n          <button onClick={deletePost} className={post__delete}>\n            Delete\n          </button>\n        ) : (\n          <></>\n        )}\n      </div>\n\n      <div className=\"post__center\">\n        <img className=\"post__photoUrl\" src={photoUrl}></img>\n      </div>\n\n      <div>\n        <p>\n          <span style={{ fontWeight: \"600\", marginRight: \"4px\" }}>\n            {username}\n          </span>\n          {caption}\n        </p>\n      </div>\n\n      {comments ? (\n        comments.map((comment) => (\n          <Comment username={comment.username} caption={comment.comment} />\n        ))\n      ) : (\n        <div></div>\n      )}\n      {user ? <CommentInput comments={comments} id={id} /> : <div />}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/sagardalal/Desktop/Desktop/ReactJS/social-app-github/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{Comment}from\"../../components\";import{db,storage}from\"../../firebase\";import\"./style.css\";import{CommentInput}from\"../../components\";import{UserContext}from\"../../contexts/user\";import{DarkModeContext}from\"../../contexts/darkmode\";export default function Post(_ref){var profileUrl=_ref.profileUrl,username=_ref.username,id=_ref.id,photoUrl=_ref.photoUrl,caption=_ref.caption,comments=_ref.comments;var _useContext$user=_slicedToArray(useContext(UserContext).user,2),user=_useContext$user[0],setUser=_useContext$user[1];var _useContext$DarkMode=_slicedToArray(useContext(DarkModeContext).DarkMode,2),DarkMode=_useContext$DarkMode[0],setDarkMode=_useContext$DarkMode[1];var postCss=\"post\";var post__delete=\"post__delete\";if(DarkMode){postCss=\"post dark\";post__delete=\"post__delete dark\";}var displayDelete=false;var currentUser=null;var postUserChecker=function postUserChecker(){if(user){currentUser=user.email.replace(\"@gmail.com\",\"\");}if(currentUser===username&&currentUser!==null){displayDelete=true;}};postUserChecker();var deletePost=function deletePost(){//delete the image from firebase storage\n//get reference to the image file we like to delete\nvar imageRef=storage.refFromURL(photoUrl);//delete the file\nimageRef.delete().then(function(){console.log(\"delete successfull\");}).catch(function(error){console.log(\"Error delete\".concat(error));});//2 delete the post info from firbase firestore\ndb.collection(\"posts\").doc(id).delete().then(function(){console.log(\"delete successfull from firebase\");}).catch(function(error){console.log(\"Error post info delete from firebase \".concat(error));});};return/*#__PURE__*/_jsxs(\"div\",{className:postCss,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__headerLeft\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"post__profilePic\",src:profileUrl}),/*#__PURE__*/_jsx(\"p\",{style:{marginLeft:\"8px\"},children:username})]}),displayDelete?/*#__PURE__*/_jsx(\"button\",{onClick:deletePost,className:post__delete,children:\"Delete\"}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post__center\",children:/*#__PURE__*/_jsx(\"img\",{className:\"post__photoUrl\",src:photoUrl})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:\"600\",marginRight:\"4px\"},children:username}),caption]})}),comments?comments.map(function(comment){return/*#__PURE__*/_jsx(Comment,{username:comment.username,caption:comment.comment});}):/*#__PURE__*/_jsx(\"div\",{}),user?/*#__PURE__*/_jsx(CommentInput,{comments:comments,id:id}):/*#__PURE__*/_jsx(\"div\",{})]});}","map":{"version":3,"sources":["/Users/sagardalal/Desktop/Desktop/ReactJS/social-app-github/src/containers/post/index.js"],"names":["React","useContext","useState","Comment","db","storage","CommentInput","UserContext","DarkModeContext","Post","profileUrl","username","id","photoUrl","caption","comments","user","setUser","DarkMode","setDarkMode","postCss","post__delete","displayDelete","currentUser","postUserChecker","email","replace","deletePost","imageRef","refFromURL","delete","then","console","log","catch","error","collection","doc","marginLeft","fontWeight","marginRight","map","comment"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { Comment } from \"../../components\";\nimport { db, storage } from \"../../firebase\";\nimport \"./style.css\";\nimport { CommentInput } from \"../../components\";\nimport { UserContext } from \"../../contexts/user\";\nimport { DarkModeContext } from \"../../contexts/darkmode\";\n\nexport default function Post({\n  profileUrl,\n  username,\n  id,\n  photoUrl,\n  caption,\n  comments,\n}) {\n  const [user, setUser] = useContext(UserContext).user;\n\n  const [DarkMode, setDarkMode] = useContext(DarkModeContext).DarkMode;\n  var postCss = \"post\";\n  var post__delete = \"post__delete\";\n  if (DarkMode) {\n    postCss = \"post dark\";\n    post__delete = \"post__delete dark\";\n  }\n\n  var displayDelete = false;\n  var currentUser = null;\n  const postUserChecker = () => {\n    if (user) {\n      currentUser = user.email.replace(\"@gmail.com\", \"\");\n    }\n    if (currentUser === username && currentUser !== null) {\n      displayDelete = true;\n    }\n  };\n  postUserChecker();\n\n  const deletePost = () => {\n    //delete the image from firebase storage\n\n    //get reference to the image file we like to delete\n    var imageRef = storage.refFromURL(photoUrl);\n\n    //delete the file\n    imageRef\n      .delete()\n      .then(function () {\n        console.log(\"delete successfull\");\n      })\n      .catch(function (error) {\n        console.log(`Error delete${error}`);\n      });\n\n    //2 delete the post info from firbase firestore\n    db.collection(\"posts\")\n      .doc(id)\n      .delete()\n      .then(function () {\n        console.log(\"delete successfull from firebase\");\n      })\n      .catch(function (error) {\n        console.log(`Error post info delete from firebase ${error}`);\n      });\n  };\n\n  return (\n    <div className={postCss}>\n      <div className=\"post__header\">\n        <div className=\"post__headerLeft\">\n          <img className=\"post__profilePic\" src={profileUrl} />\n          <p style={{ marginLeft: \"8px\" }}>{username}</p>\n        </div>\n        {displayDelete ? (\n          <button onClick={deletePost} className={post__delete}>\n            Delete\n          </button>\n        ) : (\n          <></>\n        )}\n      </div>\n\n      <div className=\"post__center\">\n        <img className=\"post__photoUrl\" src={photoUrl}></img>\n      </div>\n\n      <div>\n        <p>\n          <span style={{ fontWeight: \"600\", marginRight: \"4px\" }}>\n            {username}\n          </span>\n          {caption}\n        </p>\n      </div>\n\n      {comments ? (\n        comments.map((comment) => (\n          <Comment username={comment.username} caption={comment.comment} />\n        ))\n      ) : (\n        <div></div>\n      )}\n      {user ? <CommentInput comments={comments} id={id} /> : <div />}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}
(this["webpackJsonpsocial-app"]=this["webpackJsonpsocial-app"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(1),r=n(17),s=n.n(r),o=(n(82),n(9)),i=n(140),l=n(18),u=n(20),d=n.n(u),j=n(27),p=Object(c.createContext)(),b=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],s=n[1];return Object(a.jsx)(p.Provider,{value:{user:[r,s]},children:e.children})},m=n(34),f=m.a.initializeApp({apiKey:"AIzaSyBps2dAYpBCMSfkSp9Pb9g0uB8B4uavrpo",authDomain:"reactsocialapptutorial.firebaseapp.com",projectId:"reactsocialapptutorial",storageBucket:"reactsocialapptutorial.appspot.com",messagingSenderId:"1071064469720",appId:"1:1071064469720:web:d8358c841243c084c447ad"}).firestore(),h=m.a.auth(),g=m.a.storage(),O=new m.a.auth.GoogleAuthProvider,x=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signInWithPopup(O).then((function(e){t=e.user})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signOut().then((function(){t=!0})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.createUserWithEmailAndPassword(t,n).then((function(e){a=e.user})).catch((function(e){e.code,e.message;return e}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signInWithEmailAndPassword(t,n).then((function(e){a=e.user})).catch((function(e){e.code,e.message;return e}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();n(87);function _(){var e=Object(o.a)(Object(c.useContext)(p).user,2)[1],t=Object(l.f)(),n=function(){var n=Object(j.a)(d.a.mark((function n(){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x();case 2:(a=n.sent)&&(localStorage.setItem("user",a),e(a),t.push("/home"));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(a.jsx)("div",{onClick:n,className:"signInBtn"})}function w(e){var t=e.username,n=e.caption;return Object(a.jsx)("div",{className:"comment",children:Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{fontWeight:"600",marginRight:"4px"},children:t}),n]})})}n(92);var C=Object(c.createContext)(),y=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],s=n[1];return Object(a.jsx)(C.Provider,{value:{DarkMode:[r,s]},children:e.children})};function S(e){var t=e.comments,n=e.id,r=Object(c.useState)(""),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(o.a)(Object(c.useContext)(p).user,2),d=u[0],j=(u[1],Object(c.useState)(t||[])),b=Object(o.a)(j,2),m=b[0],h=(b[1],Object(o.a)(Object(c.useContext)(C).DarkMode,2)),g=h[0],O=(h[1],"commentInput__btn"),x="commentInput__textarea";g&&(x="commentInput__textarea dark",O="commentInput__btn dark");return Object(a.jsxs)("div",{className:"commentInput",children:[Object(a.jsx)("textarea",{className:x,rows:"1",placeholder:"write a comment..",value:i,onChange:function(e){return l(e.target.value)}}),Object(a.jsx)("button",{onClick:function(){""!==i&&(m.push({comment:i,username:d.email.replace("@gmail.com","").toLowerCase()}),f.collection("posts").doc(n).update({comments:m}).then((function(){l(""),console.log("comment added")})).catch((function(e){console.log("Error ".concat(e))})))},className:O,children:"Post"})]})}n(93),n(94),n(95);var I=n(133),P=n.p+"static/media/sun.919fd8c1.svg",U=n.p+"static/media/moon.cf257b45.svg";function L(){var e=Object(o.a)(Object(c.useContext)(C).DarkMode,2),t=e[0],n=e[1],r="darkmodebtn-image";return Object(a.jsx)("div",{className:"darkmode-btn",children:Object(a.jsx)(I.a,{onClick:function(){r="darkmodebtn-image dark",n(!t)},className:"darkmodebtn-icon",children:Object(a.jsx)("img",{className:r,src:t?U:P})})})}var D=n.p+"static/media/appicon2.12aa051e.svg",M=n.p+"static/media/blank-profile.7a6a6c54.webp";function E(){var e=Object(o.a)(Object(c.useContext)(p).user,2),t=e[0],n=(e[1],Object(o.a)(Object(c.useContext)(C).DarkMode,2)),r=n[0],s=(n[1],Object(l.f)()),i=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:e.sent&&(localStorage.removeItem("user"),s.push("/"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u="navbar";return r&&(u="navbar dark"),Object(a.jsxs)("div",{className:u,children:[Object(a.jsxs)("div",{className:"heading",children:[Object(a.jsx)("img",{style:{height:"40px",marginRight:"10px"},src:D}),"Social App",Object(a.jsx)("div",{className:"navbar-darkmode",children:Object(a.jsx)(L,{})})]}),t&&t.photoURL?Object(a.jsxs)("div",{onClick:i,className:"logged-in",children:[Object(a.jsx)("img",{className:"navbar__img",src:t.photoURL}),"Log out"]}):t&&Object(a.jsxs)("div",{onClick:i,className:"logged-in",children:[Object(a.jsx)("img",{className:"navbar__img",src:M}),"Log out"]})]})}var B=n(8),R=n(139),F=n(137),A=n(138),T=Object(c.createContext)({notification:null,showNotification:function(e){},hideNotification:function(){}});function W(e){var t=Object(c.useState)(),n=Object(o.a)(t,2),r=n[0],s=n[1];Object(c.useEffect)((function(){if(r&&("success"===r.status||"error"===r.status)){var e=setTimeout((function(){s(null)}),3e3);return function(){clearTimeout(e)}}}),[r]);var i={notification:r,showNotification:function(e){s(e)},hideNotification:function(){s(null)}};return Object(a.jsx)(T.Provider,{value:i,children:e.children})}var G=T,z=(n(96),"#C3C4C4"),J="rgb(68, 127, 255)",K=Object(B.a)({root:{"& label.Mui-focused":{color:J},"& .MuiInput-underline:after":{borderBottomColor:J},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:z},"&:hover fieldset":{borderColor:J},"&.Mui-focused fieldset":{borderColor:J}}}})(R.a);function Y(){var e=Object(o.a)(Object(c.useContext)(p).user,2),t=(e[0],e[1]),n=Object(c.useContext)(G),r=Object(o.a)(Object(c.useContext)(C).DarkMode,2),s=r[0],i=(r[1],Object(c.useState)("")),u=Object(o.a)(i,2),b=u[0],m=u[1],f=Object(c.useState)(""),h=Object(o.a)(f,2),g=h[0],O=h[1],x=Object(l.f)(),v="authform-textfield",_="authform-signin-button",w="authform-signup-button";s&&(v="authform-textfield dark",_="authform-signin-button dark",w="authform-signup-button dark",z="white",J="white");var y=function(){var e=Object(j.a)(d.a.mark((function e(a){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n.showNotification({title:"Please wait!",message:"Getting things ready...",status:"pending"}),e.prev=2,e.next=5,N(b,g);case 5:(c=e.sent)?(t(c),localStorage.setItem("user",c),n.showNotification({title:"Success!",message:"Logged in successfully",status:"success"}),x.push("/home")):n.showNotification({title:"Error!",message:"Please enter valid details",status:"error"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.showNotification({title:"Error!",message:"Not able to Sign in!",status:"error"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(d.a.mark((function e(a){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n.showNotification({title:"Please wait!",message:"Getting things ready...",status:"pending"}),e.prev=2,e.next=5,k(b,g);case 5:(c=e.sent)?(t(c),localStorage.setItem("user",c),n.showNotification({title:"Success!",message:"Logged in successfully",status:"success"}),x.push("/home")):n.showNotification({title:"Error!",message:"Please enter valid details",status:"error"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.showNotification({title:"Error!",message:"Not able to Sign in!",status:"error"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(F.a,{style:{marginBottom:"45px",backgroundColor:s&&"white"}}),Object(a.jsx)("div",{className:"authform-textfields-wrapper",children:Object(a.jsxs)("div",{className:"authform-textfields",children:[Object(a.jsx)(K,{inputProps:{className:v},InputLabelProps:{className:v},autoComplete:"off",variant:"outlined",label:"Email",type:"text",value:b,onChange:function(e){return m(e.target.value)}}),Object(a.jsx)(K,{InputProps:{className:v},InputLabelProps:{className:v},variant:"outlined",label:"Password",type:"password",value:g,style:{marginTop:"20px"},onChange:function(e){return O(e.target.value)}})]})}),Object(a.jsx)(F.a,{style:{marginTop:"25px",backgroundColor:s&&"white"}}),Object(a.jsxs)("div",{style:{float:"right",marginTop:"10px"},children:[Object(a.jsx)(A.a,{className:_,autoFocus:!0,type:"submit",onClick:S,children:"Login"}),Object(a.jsx)(A.a,{className:w,autoFocus:!0,type:"submit",onClick:y,color:"primary",children:"SignUp"})]})]})}var q=n(38),H=(n(97),n(98),n(67)),Q=n.n(H);function V(){var e=Object(o.a)(Object(c.useContext)(p).user,2),t=e[0],n=e[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(c.useState)(null),d=Object(o.a)(u,2),j=d[0],b=d[1],h=Object(c.useState)(0),O=Object(o.a)(h,2),x=O[0],v=O[1],N=Object(o.a)(Object(c.useContext)(C).DarkMode,2),k=N[0],_=(N[1],"createPost__loggedIn"),w="createPost__textarea";k&&(w="createPost__textarea dark",_="createPost__loggedIn dark"),m.a.auth().onAuthStateChanged((function(e){n(e)}));return Object(a.jsx)("div",{className:"createPost",children:t?Object(a.jsxs)("div",{className:_,children:[Object(a.jsx)("p",{children:"Create Post"}),Object(a.jsxs)("div",{className:"createPost__loggedInCenter",children:[Object(a.jsx)("textarea",{placeholder:"enter caption here..",className:w,rows:"3",value:i,onChange:function(e){return l(e.target.value)}}),Object(a.jsx)("div",{className:"createPost__imagePreview",children:Object(a.jsx)("img",{id:"image-preview",alt:""})})]}),Object(a.jsxs)("div",{className:"creatPost__loggedInBottom",children:[Object(a.jsxs)("div",{className:"createPost__imageUpload",children:[Object(a.jsx)("label",{htmlFor:"fileInput",children:Object(a.jsx)(Q.a,{style:{cursor:"pointer",fontSize:"20px"}})}),Object(a.jsx)("input",{id:"fileInput",type:"file",accept:"image/*",onChange:function(e){if(e.target.files[0]){b(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),n=document.getElementById("image-preview");n.src=t,n.style.display="block"}}})]}),Object(a.jsx)("button",{className:"createPost__uploadBtn",onClick:function(){if(j){var e=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,c=0;c<e;c++)t+=n.charAt(Math.floor(Math.random()*a));return t}(10);g.ref("images/".concat(e,".jpg")).put(j).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);v(t)}),(function(e){console.log(e)}),(function(){g.ref("images").child("".concat(e,".jpg")).getDownloadURL().then((function(e){f.collection("posts").add({timestamp:m.a.firestore.Timestamp.now(),caption:i,photoUrl:e,username:t.email.replace("@gmail.com",""),profileUrl:t.photoURL?t.photoURL:"https://firebasestorage.googleapis.com/v0/b/reactsocialapptutorial.appspot.com/o/images%2Fblank-profile.webp?alt=media&token=d749fb07-d371-4927-b3d7-ac16abd31c9e"})})),l(""),v(0),b(null),document.getElementById("image-preview").style.display="none",console.log("image nulled")}))}},style:{color:k?i?"#FFFFFF":"lightgrey":i?"#000":"lightgrey"},children:"Upload ".concat(0!=x?x:"")})]})]}):Object(a.jsx)("div",{})})}n(103);function X(e){var t=e.profileUrl,n=e.username,r=e.id,s=e.photoUrl,i=e.caption,l=e.comments,u=Object(o.a)(Object(c.useContext)(p).user,2),d=u[0],j=(u[1],Object(o.a)(Object(c.useContext)(C).DarkMode,2)),b=j[0],m=(j[1],"post"),h="post__delete";b&&(m="post dark",h="post__delete dark");var O=!1,x=null;d&&(x=d.email.replace("@gmail.com","")),x===n&&null!==x&&(O=!0);return Object(a.jsxs)("div",{className:m,children:[Object(a.jsxs)("div",{className:"post__header",children:[Object(a.jsxs)("div",{className:"post__headerLeft",children:[Object(a.jsx)("img",{className:"post__profilePic",src:t}),Object(a.jsx)("p",{style:{marginLeft:"8px"},children:n})]}),O&&Object(a.jsx)("button",{onClick:function(){g.refFromURL(s).delete().then((function(){console.log("delete successfull")})).catch((function(e){console.log("Error delete".concat(e))})),f.collection("posts").doc(r).delete().then((function(){console.log("delete successfull from firebase")})).catch((function(e){console.log("Error post info delete from firebase ".concat(e))}))},className:h,children:"Delete"})]}),Object(a.jsx)("div",{className:"post__center",children:Object(a.jsx)("img",{className:"post__photoUrl",src:s})}),Object(a.jsx)("div",{children:Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{fontWeight:"600",marginRight:"4px"},children:n}),i]})}),l&&l.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsx)(w,{username:e.username,caption:e.comment})},e.username)})),d&&Object(a.jsx)(S,{comments:l,id:r})]})}n(104);function Z(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(o.a)(Object(c.useContext)(C).DarkMode,2),i=s[0],l=(s[1],"feed");return i&&(l="feed dark"),Object(c.useEffect)((function(){f.collection("posts").onSnapshot((function(e){r(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(a.jsx)("div",{className:l,children:n.map((function(e){var t=e.id,n=e.post;return Object(a.jsx)("div",{style:{padding:"6px 0px"},children:Object(a.jsx)(X,{id:t,profileUrl:n.profileUrl,username:n.username,photoUrl:n.photoUrl,caption:n.caption,comments:n.comments},t)})}))})}var $=n(68);var ee,te=(ee=function(){var e=Object(o.a)(Object(c.useContext)(C).DarkMode,2),t=e[0],n=(e[1],"home");return t&&(n="home dark"),Object(a.jsxs)("div",{className:n,children:[Object(a.jsx)(E,{}),Object(a.jsx)(V,{}),Object(a.jsx)(Z,{})]})},function(e){var t=Object(o.a)(Object(c.useContext)(p).user,2),n=t[0];return t[1],n?Object(a.jsx)("div",{children:Object(a.jsx)(ee,Object($.a)({},e))}):null}),ne=function(){var e=Object(o.a)(Object(c.useContext)(p).user,2),t=(e[0],e[1]);return Object(c.useEffect)((function(){localStorage.getItem("user")&&t(localStorage.getItem("user"))}),[]),Object(a.jsx)("div",{className:"app",children:Object(a.jsx)(te,{})})},ae=n(48),ce=n.n(ae);var re=function(e){var t=Object(c.useContext)(G),n=e.title,r=e.message,s=e.status,o="";"success"===s&&(o=ce.a.success),"error"===s&&(o=ce.a.error),"pending"===s&&(o=ce.a.pending);var i="".concat(ce.a.notification," ").concat(o);return Object(a.jsxs)("div",{className:i,onClick:t.hideNotification,children:[Object(a.jsx)("h2",{children:n}),Object(a.jsx)("p",{children:r})]})};function se(e){var t=Object(c.useContext)(G).notification;return Object(a.jsxs)("div",{children:[e.children,t&&Object(a.jsx)(re,{title:t.title,message:t.message,status:t.status})]})}s.a.render(Object(a.jsx)(W,{children:Object(a.jsx)(y,{children:Object(a.jsx)(b,{children:Object(a.jsx)(q.a,{children:Object(a.jsx)(se,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/social-media-app/",component:function(){var e=Object(o.a)(Object(c.useContext)(p).user,2),t=(e[0],e[1],Object(l.f)(),Object(o.a)(Object(c.useContext)(C).DarkMode,2)),n=t[0],r=(t[1],"loginpage-inner"),s="loginpage-title",u="loginpage-card";return n&&(r="loginpage-inner dark",s="loginpage-title dark",u="loginpage-card dark"),Object(a.jsxs)("div",{className:"loginpage",children:[Object(a.jsx)(E,{}),Object(a.jsxs)("div",{className:r,children:[Object(a.jsxs)("div",{className:s,children:["Share your stories here! ",Object(a.jsx)("br",{}),"Sign up Now!"]}),Object(a.jsx)(i.a,{className:u,children:Object(a.jsxs)(i.a.Body,{className:"loginpage-card-body",children:[Object(a.jsx)(Y,{}),Object(a.jsx)(i.a.Text,{className:"loginpage-card-text",children:"Sign in with Google:"}),Object(a.jsx)("div",{className:"loginpage-signinbtn",children:Object(a.jsx)(_,{})})]})})]}),Object(a.jsx)("div",{className:"loginpage-footer",children:"Developed by Sagar Dalal"})]})}}),Object(a.jsx)(l.a,{exact:!0,path:"/home",component:ne})]})})})})})}),document.getElementById("root"))},48:function(e,t,n){e.exports={notification:"notification_notification__2lEK8",pending:"notification_pending__13nR4",success:"notification_success__2LYeu",error:"notification_error__1Dac6"}},82:function(e,t,n){},87:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.f7f3204e.chunk.js.map
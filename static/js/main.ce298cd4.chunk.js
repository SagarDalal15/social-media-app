(this["webpackJsonpsocial-app"]=this["webpackJsonpsocial-app"]||[]).push([[0],{58:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){"use strict";c.r(t);var a=c(3),n=c(2),s=c(30),r=c.n(s),o=(c(58),c(6)),i=c(20),l=c.n(i),j=c(29),u=Object(n.createContext)(),d=function(e){var t=Object(n.useState)(null),c=Object(o.a)(t,2),s=c[0],r=c[1];return Object(a.jsx)(u.Provider,{value:{user:[s,r]},children:e.children})},p=c(28),m=p.a.initializeApp({apiKey:"AIzaSyBps2dAYpBCMSfkSp9Pb9g0uB8B4uavrpo",authDomain:"reactsocialapptutorial.firebaseapp.com",projectId:"reactsocialapptutorial",storageBucket:"reactsocialapptutorial.appspot.com",messagingSenderId:"1071064469720",appId:"1:1071064469720:web:d8358c841243c084c447ad"}).firestore(),b=p.a.auth(),h=p.a.storage(),O=new p.a.auth.GoogleAuthProvider,g=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.signInWithPopup(O).then((function(e){console.log(e.user),t=e.user})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.signOut().then((function(){t=!0})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c(63);function f(){var e=Object(o.a)(Object(n.useContext)(u).user,2)[1],t=function(){var t=Object(j.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:(c=t.sent)&&e(c);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)("div",{onClick:t,className:"signInBtn"})}function v(e){var t=e.username,c=e.caption;return Object(a.jsx)("div",{className:"comment",children:Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{fontWeight:"600",marginRight:"4px"},children:t}),c]})})}c(64);var _=Object(n.createContext)(),N=function(e){var t=Object(n.useState)(!1),c=Object(o.a)(t,2),s=c[0],r=c[1];return Object(a.jsx)(_.Provider,{value:{DarkMode:[s,r]},children:e.children})};function k(e){var t=e.comments,c=e.id,s=Object(n.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],j=Object(o.a)(Object(n.useContext)(u).user,2),d=j[0],p=(j[1],Object(n.useState)(t||[])),b=Object(o.a)(p,2),h=b[0],O=(b[1],Object(o.a)(Object(n.useContext)(_).DarkMode,2)),g=O[0],x=(O[1],"commentInput__btn"),f="commentInput__textarea";g&&(f="commentInput__textarea dark",x="commentInput__btn dark");return Object(a.jsxs)("div",{className:"commentInput",children:[Object(a.jsx)("textarea",{className:f,rows:"1",placeholder:"write a comment..",value:i,onChange:function(e){return l(e.target.value)}}),Object(a.jsx)("button",{onClick:function(){""!=i&&(h.push({comment:i,username:d.email.replace("@gmail.com","").toLowerCase()}),m.collection("posts").doc(c).update({comments:h}).then((function(){l(""),console.log("comment added")})).catch((function(e){console.log("Error ".concat(e))})))},className:x,children:"Post"})]})}var y=c(11),C=(c(65),c(97)),w=c.p+"static/media/appicon.7e0b82f4.svg",S=c.p+"static/media/appicon2.12aa051e.svg";var I=c(39),P=(c(70),c(71),c(72),c(98)),U=c.p+"static/media/sun.919fd8c1.svg",D=c.p+"static/media/moon.cf257b45.svg";function B(){var e=Object(o.a)(Object(n.useContext)(_).DarkMode,2),t=e[0],c=e[1],s="darkmodebtn-image";return Object(a.jsx)("div",{className:"darkmode-btn",children:Object(a.jsx)(P.a,{onClick:function(){s="darkmodebtn-image dark",c(!t)},className:"darkmodebtn-icon",children:Object(a.jsx)("img",{className:s,src:t?D:U})})})}function M(){var e=Object(o.a)(Object(n.useContext)(u).user,2),t=e[0],c=(e[1],Object(o.a)(Object(n.useContext)(_).DarkMode,2)),s=c[0],r=(c[1],Object(y.f)()),i=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t||r.push("./");var d="navbar";return s&&(d="navbar dark"),Object(a.jsxs)("div",{className:d,children:[Object(a.jsxs)("div",{className:"heading",children:[Object(a.jsx)("img",{style:{height:"40px",marginRight:"10px"},src:S}),"Say it Social",Object(a.jsx)("div",{className:"navbar-darkmode",children:Object(a.jsx)(B,{})})]}),t?Object(a.jsxs)("div",{onClick:i,className:"logged-in",children:[Object(a.jsx)("img",{className:"navbar__img",src:t.photoURL}),"Log out"]}):Object(a.jsx)(f,{})]})}c(73);var R=c(50),L=c.n(R);function F(){var e=Object(o.a)(Object(n.useContext)(u).user,2),t=e[0],c=e[1],s=Object(n.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],j=Object(n.useState)(null),d=Object(o.a)(j,2),b=d[0],O=d[1],g=Object(n.useState)(0),x=Object(o.a)(g,2),f=x[0],v=x[1],N=Object(o.a)(Object(n.useContext)(_).DarkMode,2),k=N[0],y=(N[1],"createPost__loggedIn"),C="createPost__textarea";k&&(C="createPost__textarea dark",y="createPost__loggedIn dark"),p.a.auth().onAuthStateChanged((function(e){c(e)}));return Object(a.jsx)("div",{className:"createPost",children:t?Object(a.jsxs)("div",{className:y,children:[Object(a.jsx)("p",{children:"Create Post"}),Object(a.jsxs)("div",{className:"createPost__loggedInCenter",children:[Object(a.jsx)("textarea",{placeholder:"enter caption here..",className:C,rows:"3",value:i,onChange:function(e){return l(e.target.value)}}),Object(a.jsx)("div",{className:"createPost__imagePreview",children:Object(a.jsx)("img",{id:"image-preview",alt:""})})]}),Object(a.jsxs)("div",{className:"creatPost__loggedInBottom",children:[Object(a.jsxs)("div",{className:"createPost__imageUpload",children:[Object(a.jsx)("label",{htmlFor:"fileInput",children:Object(a.jsx)(L.a,{style:{cursor:"pointer",fontSize:"20px"}})}),Object(a.jsx)("input",{id:"fileInput",type:"file",accept:"image/*",onChange:function(e){if(e.target.files[0]){O(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),c=document.getElementById("image-preview");c.src=t,c.style.display="block"}}})]}),Object(a.jsx)("button",{className:"createPost__uploadBtn",onClick:function(){if(b){var e=function(e){for(var t="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=c.length,n=0;n<e;n++)t+=c.charAt(Math.floor(Math.random()*a));return t}(10);h.ref("images/".concat(e,".jpg")).put(b).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);v(t)}),(function(e){console.log(e)}),(function(){h.ref("images").child("".concat(e,".jpg")).getDownloadURL().then((function(e){m.collection("posts").add({timestamp:p.a.firestore.Timestamp.now(),caption:i,photoUrl:e,username:t.email.replace("@gmail.com",""),profileUrl:t.photoURL})})),l(""),v(0),O(null),document.getElementById("image-preview").style.display="none",console.log("image nulled")}))}},style:{color:k?i?"#FFFFFF":"lightgrey":i?"#000":"lightgrey"},children:"Upload ".concat(0!=f?f:"")})]})]}):Object(a.jsx)("div",{})})}c(78);function E(e){var t=e.profileUrl,c=e.username,s=e.id,r=e.photoUrl,i=e.caption,l=e.comments,j=Object(o.a)(Object(n.useContext)(u).user,2),d=j[0],p=(j[1],Object(o.a)(Object(n.useContext)(_).DarkMode,2)),b=p[0],O=(p[1],"post"),g="post__delete";b&&(O="post dark",g="post__delete dark");var x=!1,f=null;d&&(f=d.email.replace("@gmail.com","")),f===c&&null!==f&&(x=!0);return Object(a.jsxs)("div",{className:O,children:[Object(a.jsxs)("div",{className:"post__header",children:[Object(a.jsxs)("div",{className:"post__headerLeft",children:[Object(a.jsx)("img",{className:"post__profilePic",src:t}),Object(a.jsx)("p",{style:{marginLeft:"8px"},children:c})]}),x?Object(a.jsx)("button",{onClick:function(){h.refFromURL(r).delete().then((function(){console.log("delete successfull")})).catch((function(e){console.log("Error delete".concat(e))})),m.collection("posts").doc(s).delete().then((function(){console.log("delete successfull from firebase")})).catch((function(e){console.log("Error post info delete from firebase ".concat(e))}))},className:g,children:"Delete"}):Object(a.jsx)(a.Fragment,{})]}),Object(a.jsx)("div",{className:"post__center",children:Object(a.jsx)("img",{className:"post__photoUrl",src:r})}),Object(a.jsx)("div",{children:Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{fontWeight:"600",marginRight:"4px"},children:c}),i]})}),l?l.map((function(e){return Object(a.jsx)(v,{username:e.username,caption:e.comment})})):Object(a.jsx)("div",{}),d?Object(a.jsx)(k,{comments:l,id:s}):Object(a.jsx)("div",{})]})}c(79);function A(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1],r=Object(o.a)(Object(n.useContext)(_).DarkMode,2),i=r[0],l=(r[1],"feed");return i&&(l="feed dark"),Object(n.useEffect)((function(){m.collection("posts").onSnapshot((function(e){console.log(e.docs),s(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(a.jsx)("div",{className:l,children:c.map((function(e){var t=e.id,c=e.post;return Object(a.jsx)(E,{id:t,profileUrl:c.profileUrl,username:c.username,photoUrl:c.photoUrl,caption:c.caption,comments:c.comments},t)}))})}function T(){var e=Object(o.a)(Object(n.useContext)(_).DarkMode,2),t=e[0],c=(e[1],"home");return t&&(c="home dark"),Object(a.jsxs)("div",{className:c,children:[Object(a.jsx)(M,{}),Object(a.jsx)(F,{}),Object(a.jsx)(A,{}),Object(a.jsx)("div",{style:{backgroundColor:"#333333",color:"white",display:"flex",justifyContent:"center",alignItems:"center",height:"40px"},children:"Developed by Sagar Dalal"})]})}var z=function(){return Object(a.jsx)("div",{className:"app",children:Object(a.jsx)(T,{})})};r.a.render(Object(a.jsx)(N,{children:Object(a.jsx)(d,{children:Object(a.jsx)(I.a,{children:Object(a.jsxs)(y.c,{children:[Object(a.jsx)(y.a,{exact:!0,path:"/social-media-app/",component:function(){var e=Object(o.a)(Object(n.useContext)(u).user,2),t=e[0],c=(e[1],Object(y.f)());return t&&c.push("./home"),Object(a.jsxs)("div",{className:"loginpage",children:[Object(a.jsx)("div",{className:"loginpage-header",children:Object(a.jsxs)("div",{className:"loginpage-heading",children:[Object(a.jsx)("img",{style:{height:"40px",width:"40px",borderRadius:"12px",marginRight:"20px"},src:w}),"Say it Social"]})}),Object(a.jsxs)("div",{className:"loginpage-inner",children:[Object(a.jsxs)("div",{className:"loginpage-title",children:[Object(a.jsx)("div",{className:"loginpage-icon",children:Object(a.jsx)(C.a.Img,{style:{width:"200px",marginTop:"40px"},src:S})})," ","Say it Social"]}),Object(a.jsx)(C.a,{className:"loginpage-card",children:Object(a.jsxs)(C.a.Body,{children:[Object(a.jsx)(C.a.Text,{className:"loginpage-card-text",children:"Sign in with Google:"}),Object(a.jsx)("div",{className:"loginpage-signinbtn",children:Object(a.jsx)(f,{})})]})})]}),Object(a.jsx)("div",{className:"loginpage-footer",children:"Developed by Sagar Dalal"})]})}}),Object(a.jsx)(y.a,{exact:!0,path:"/social-media-app/home",component:z})]})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.ce298cd4.chunk.js.map